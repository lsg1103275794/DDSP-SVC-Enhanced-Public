# DDSP-SVC-Enhanced - å…·å¤‡ä¸“ä¸šéŸ³é¢‘å¢å¼ºåŠŸèƒ½çš„ä¸‹ä¸€ä»£æ­Œå£°è½¬æ¢ç³»ç»Ÿ

[**English**](./README.md) | **ä¸­æ–‡**

[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/Python-3.8+-green.svg)](https://www.python.org/)
[![PyTorch](https://img.shields.io/badge/PyTorch-2.4+-orange.svg)](https://pytorch.org/)
[![Stars](https://img.shields.io/github/stars/lsg1103275794/DDSP-SVC-Enhanced-Public?style=social)](https://github.com/lsg1103275794/DDSP-SVC-Enhanced-Public)

> ğŸš€ **æ ¸å¿ƒå®šä½**ï¼šåŸºäº [DDSP-SVC](https://github.com/yxlllc/DDSP-SVC) çš„ä¸“ä¸šçº§å¢å¼ºåˆ†æ”¯ï¼Œé›†æˆå…ˆè¿› DSP æŠ€æœ¯å®ç°æè‡´éŸ³é«˜ç¨³å®šæ€§ã€‚
>
> ğŸ¨ **å…¨æ–°åŠŸèƒ½**ï¼š**LFO åŠ¨æ€è¡¨ç°åŠ›ç³»ç»Ÿ** & **å†…ç½®å½•éŸ³å®¤ FX æ•ˆæœé“¾** - è®© AI åˆæˆå£°çº¿æ‹¥æœ‰è‡ªç„¶çš„æƒ…æ„Ÿèµ·ä¼ã€‚
>
> ğŸ’¡ **è‡´è°¢ä¸è‡´æ•¬**ï¼šæœ¬é¡¹ç›®çš„æ ¸å¿ƒ DDSP-SVC åŠŸèƒ½å®Œå…¨æ¥è‡ª [yxlllc](https://github.com/yxlllc/DDSP-SVC) çš„åŸå§‹é¡¹ç›®ã€‚æœ¬å¢å¼ºç‰ˆåœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ äº†éŸ³é¢‘å¢å¼ºç®—æ³•ã€Web ç•Œé¢åŠå¤šé¡¹æ€§èƒ½ä¼˜åŒ–ï¼Œæ—¨åœ¨æä¾›æ›´ä¸“ä¸šçš„æ­Œå£°åˆæˆä½“éªŒã€‚

---

## ğŸ“– ç›®å½•
- [ğŸš€ ä»“åº“äº®ç‚¹ (VS åŸç‰ˆ)](#-ä»“åº“äº®ç‚¹-vs-åŸç‰ˆ)
- [âœ¨ æ ¸å¿ƒç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§)
- [ğŸ“¦ å®‰è£…æŒ‡å—](#-å®‰è£…æŒ‡å—)
- [ğŸ”§ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ğŸ“‚ æ•°æ®å‡†å¤‡](#-æ•°æ®å‡†å¤‡)
- [ğŸŒ Web ç•Œé¢](#-web-ç•Œé¢)
- [ğŸ”¬ æŠ€æœ¯æ¶æ„](#-æŠ€æœ¯æ¶æ„)
- [ğŸ—ºï¸ è·¯çº¿å›¾](#-è·¯çº¿å›¾)
- [ğŸ¤ å‚ä¸è´¡çŒ®](#-å‚ä¸è´¡çŒ®)

---

## ğŸš€ ä»“åº“äº®ç‚¹ (VS åŸç‰ˆ)

æœ¬åˆ†æ”¯ä¸“ä¸ºè¿½æ±‚**å½•éŸ³å®¤çº§å“è´¨**å’Œ**ç°ä»£å·¥ä½œæµ**çš„ç”¨æˆ·æ‰“é€ ã€‚

| ç‰¹æ€§ | åŸç‰ˆ DDSP-SVC | **DDSP-SVC-Enhanced** | æå‡æ•ˆæœ |
|:---|:---:|:---:|:---|
| **éŸ³é«˜ç¨³å®šæ€§** | åŸºç¡€æå– | **IIR + ä¸­å€¼æ»¤æ³¢** | å½»åº•æ¶ˆé™¤é•¿éŸ³ä¸­çš„éŸ³é«˜æŠ–åŠ¨ |
| **å…«åº¦ä¿®å¤** | æ‰‹åŠ¨è°ƒæ•´ | **è‡ªåŠ¨ä¿®æ­£** | æ¶ˆé™¤ 95% ä»¥ä¸Šçš„å…«åº¦è·³å˜é”™è¯¯ |
| **è¡¨ç°åŠ›å¢å¼º** | é™æ€éŸ³é«˜ | **LFO æ‰å¼¦ä¸é¢¤éŸ³** | ä¸ºåˆæˆäººå£°æ³¨å…¥æƒ…æ„Ÿä¸ç”Ÿå‘½åŠ› |
| **åæœŸå¤„ç†** | éœ€å¤–éƒ¨æ’ä»¶ | **å†…ç½® FX æ•ˆæœé“¾** | æ— éœ€ç¦»å¼€ç¨‹åºå³å¯è·å¾—ä¸“ä¸šå¬æ„Ÿ |
| **ç”¨æˆ·ç•Œé¢** | å‘½ä»¤è¡Œ/æ—§ç‰ˆ GUI | **ç°ä»£ Vue.js 3 Web UI** | æµç¨‹åŒ–ã€ç¾è§‚ä¸”ç›´è§‚çš„æ“ä½œä½“éªŒ |
| **é¢„å¤„ç†** | åŸºç¡€åŠŸèƒ½ | **é›†æˆ MSST + UVR** | å¼€ç®±å³ç”¨çš„é«˜è´¨é‡äººå£°åˆ†ç¦» |

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ’ ä¸“ä¸šéŸ³é¢‘å¢å¼º (AudioNoise æ ¸å¿ƒ)
- ğŸ™ï¸ **é«˜çº§ F0 å¹³æ»‘**: é‡‡ç”¨ IIR å·´ç‰¹æ²ƒæ–¯æ»¤æ³¢å™¨ç¨³å®šéŸ³é«˜ï¼Œå¯¹æ°”æ¯éŸ³æˆ–å¼±å£°éƒ¨åˆ†å°¤ä¸ºæœ‰æ•ˆã€‚
- ğŸ¹ **æ™ºèƒ½å…«åº¦ä¿®æ­£**: å®æ—¶æ£€æµ‹å¹¶ä¿®å¤çªå‘çš„å…«åº¦è·³å˜ï¼ˆå¦‚ 440Hz ä¸ 880Hz é—´çš„é”™è¯¯åˆ‡æ¢ï¼‰ã€‚
- ğŸŒˆ **åŠ¨æ€ LFO è°ƒåˆ¶**: å¯è°ƒèŠ‚é¢‘ç‡ä¸æ·±åº¦çš„è‡ªç„¶æ‰å¼¦ (Vibrato) ä¸é¢¤éŸ³ (Tremolo) æ•ˆæœã€‚
- ğŸ›ï¸ **å½•éŸ³å®¤çº§æ•ˆæœé“¾**: å†…ç½®é«˜ä¿çœŸåˆå”± (Chorus)ã€æ··å“ (Reverb)ã€æ³•å…° (Flanger) å’Œç§»ç›¸ (Phaser)ã€‚

### âš¡ æ€§èƒ½ä¸æ•ˆç‡ä¼˜åŒ–
- âš™ï¸ **ä¼˜åŒ– DSP å†…æ ¸**: ä½¿ç”¨ç¯å½¢ç¼“å†²åŒºå’Œ Biquad æ»¤æ³¢å™¨è½¬ç½®ç»“æ„ï¼Œé™ä½ 20-30% CPU å ç”¨ã€‚
- ğŸš„ **ä½å»¶è¿Ÿè®¾è®¡**: é’ˆå¯¹å®æ—¶è½¬æ¢å’Œç›‘å¬è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ï¼Œæ”¯æŒæ¯«ç§’çº§å“åº”ã€‚
- ğŸµ **é«˜ä¿çœŸè¾“å‡º**: ç”± NSF-HiFiGAN é©±åŠ¨ï¼Œå®Œç¾æ”¯æŒ 44.1kHz/48kHz é‡‡æ ·ç‡ã€‚

---

## ğŸ“¦ å®‰è£…æŒ‡å—

### ç³»ç»Ÿè¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11, Linux (æ¨è Ubuntu 20.04+)
- **æ˜¾å¡**: NVIDIA RTX 30/40 ç³»åˆ— (æ¨è 8GB+ æ˜¾å­˜)
- **Python**: 3.8 - 3.11

### 1. å…‹éš†é¡¹ç›®ä¸ç¯å¢ƒé…ç½®
```bash
# å…‹éš†ä»“åº“
git clone https://github.com/lsg1103275794/DDSP-SVC-Enhanced-Public.git
cd DDSP-SVC-Enhanced

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¼ºçƒˆæ¨èï¼Œä»¥éš”ç¦»ä¾èµ–ç¯å¢ƒï¼‰
python -m venv venv
# æ¿€æ´»ç¯å¢ƒ (Windows)
venv\Scripts\activate
# æ¿€æ´»ç¯å¢ƒ (Linux/macOS)
source venv/bin/activate
```

### 2. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
# å®‰è£…å¸¦ CUDA æ”¯æŒçš„ PyTorch (ä»¥ CUDA 11.8 ä¸ºä¾‹)
pip install torch==2.4.1 torchvision==0.19.1 torchaudio==2.4.1 --index-url https://download.pytorch.org/whl/cu118
```

---

## ğŸ”§ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šä¸‹è½½é¢„è®­ç»ƒæ¨¡å‹
è¯·å°†ä»¥ä¸‹æ–‡ä»¶æ”¾å…¥ `pretrain/` ç›®å½•ï¼š
- **ContentVec (æ¨è)**: `pretrain/contentvec/checkpoint_best_legacy_500.pt`
- **å£°ç å™¨ (Vocoder)**: `pretrain/nsf_hifigan/` (ä» [OpenVPI](https://github.com/openvpi/vocoders/releases) ä¸‹è½½å¹¶è§£å‹)
- **éŸ³é«˜æå–å™¨ (Pitch Extractor)**: `pretrain/rmvpe/model.pt`

### ç¬¬äºŒæ­¥ï¼šå•æ¡æŒ‡ä»¤æ¨ç†
```bash
# ä½¿ç”¨å…¨å¥—å¢å¼ºåŠŸèƒ½ï¼šå¹³æ»‘éŸ³é«˜ + å…«åº¦ä¿®æ­£ + é¢¤éŸ³ + æ··å“
python main_reflow.py -i input.wav -m model.pt -o output.wav \
  -f0smooth -octavefix -vibrato -fx natural -reverb -revmix 0.25
```

---

## ğŸ“‚ æ•°æ®å‡†å¤‡

### ç›®å½•ç»“æ„è§„èŒƒ

#### å•è¯´è¯äºº (Single Speaker)
```text
data/
â”œâ”€â”€ train/audio/    # çº¦ 1000+ ä¸ª 2ç§’ä»¥ä¸Šçš„ .wav æ–‡ä»¶
â”‚   â”œâ”€â”€ song1.wav
â”‚   â””â”€â”€ ...
â””â”€â”€ val/audio/      # çº¦ 10 ä¸ªéªŒè¯æ–‡ä»¶
    â””â”€â”€ test1.wav
```

#### å¤šè¯´è¯äºº (Multi Speaker)
```text
data/
â”œâ”€â”€ train/audio/
â”‚   â”œâ”€â”€ spk1/       # è¯´è¯äºº 1
â”‚   â”‚   â”œâ”€â”€ a.wav
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ spk2/       # è¯´è¯äºº 2
â”‚       â””â”€â”€ b.wav
â””â”€â”€ val/audio/
    â”œâ”€â”€ spk1/
    â””â”€â”€ spk2/
```

### ğŸ’¡ è®­ç»ƒä¸é¢„å¤„ç†å°è´´å£«
- **é¢„å¤„ç†**: ä½¿ç”¨ `python preprocess.py -c configs/reflow.yaml`ã€‚å¤šè¯´è¯äººæ¨¡å‹è¯·åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½® `n_spk` æ•°é‡ã€‚
- **è®­ç»ƒ**: è¿è¡Œ `python train_reflow.py -c configs/reflow.yaml`ã€‚ç¨‹åºä¼šè‡ªåŠ¨æ¢å¤ä¸­æ–­çš„è¿›åº¦ã€‚
- **ç›‘æ§**: ä½¿ç”¨ `tensorboard --logdir=exp` å®æ—¶æŸ¥çœ‹è®­ç»ƒæ›²çº¿ã€‚

---

## ğŸŒ Web ç•Œé¢

é€šè¿‡æˆ‘ä»¬ç°ä»£åŒ–çš„ Web ç•Œé¢ä½“éªŒ **DDSP-SVC-Enhanced** çš„å…¨éƒ¨åŠŸèƒ½ã€‚

1. **å¯åŠ¨åç«¯**: `python -m uvicorn api.main:app --port 8000`
2. **å¯åŠ¨å‰ç«¯**: `cd web && npm install && npm run dev`
3. **æ‰“å¼€æµè§ˆå™¨**: è®¿é—® `http://localhost:5173`

> ğŸ¨ **ç•Œé¢ç‰¹æ€§**: å®æ—¶éŸ³é«˜å¯è§†åŒ–ã€äº¤äº’å¼æ•ˆæœå™¨æ»‘å—ã€æ‰¹é‡å¤„ç†æ”¯æŒä»¥åŠæ·±è‰²æ¨¡å¼ã€‚

---

## ğŸ”¬ æŠ€æœ¯æ¶æ„

å¢å¼ºæµæ°´çº¿éµå¾ªé«˜æ€§èƒ½ DSP æ¶æ„ï¼š

1. **è¾“å…¥**: åŸå§‹éŸ³é¢‘ (Mono, 44.1kHz)
2. **ç‰¹å¾æå–**: ContentVec (Units) + RMVPE (F0)
3. **å¢å¼ºå±‚**:
    - **å…«åº¦ä¿®å¤å™¨** -> **F0 å¹³æ»‘å™¨ (IIR)** -> **LFO è°ƒåˆ¶å™¨**
4. **åˆæˆ**: DDSP è°æ³¢ + å™ªå£°æ¨¡å‹
5. **æ•ˆæœé“¾**: Biquad æ»¤æ³¢å™¨ -> åˆå”± -> æ··å“
6. **è¾“å‡º**: å¢å¼ºåçš„æ­Œå£°

---

## ğŸ—ºï¸ è·¯çº¿å›¾
- [ ] **v1.1**: æ”¯æŒå®æ—¶ VST æ’ä»¶
- [ ] **v1.2**: é›†æˆæ›´å…ˆè¿›çš„éŸ³é«˜æå–å™¨ (å¦‚ FCPE)
- [ ] **v1.3**: ä¸º Windows ç”¨æˆ·æä¾›ä¸€é”®å®‰è£…åŒ…
- [ ] **v2.0**: æ”¯æŒåŸºäºæ‰©æ•£ (Diffusion) çš„å¢å¼ºå±‚

## ğŸ™ è‡´è°¢ä¸å‚è€ƒ

æœ¬é¡¹ç›®ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œæ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®çš„è´¡çŒ®ï¼š

- **[DDSP-SVC](https://github.com/yxlllc/DDSP-SVC)** - yxlllc å¼€å‘çš„åŸå§‹ DDSP æ­Œå£°è½¬æ¢æ¡†æ¶ï¼ˆæœ¬é¡¹ç›®æ ¸å¿ƒï¼‰ã€‚
- **[AudioNoise](https://github.com/torvalds/AudioNoise)** - æä¾›äº† F0 å¹³æ»‘ã€LFO è°ƒåˆ¶åŠéŸ³é¢‘æ•ˆæœé“¾çš„æ ¸å¿ƒç®—æ³•ã€‚
- **[pc-ddsp](https://github.com/yxlllc/pc-ddsp)** - åŸºäºç›¸ä½çš„ DDSP å®ç°å‚è€ƒã€‚
- **[ddsp](https://github.com/magenta/ddsp)** - Google Magenta çš„å¯å¾®åˆ† DSP åº“ã€‚
- **[ContentVec](https://github.com/amefs/contentvec)** - å¼ºå¤§çš„å†…å®¹ç¼–ç å™¨æ”¯æŒã€‚
- **[RMVPE](https://github.com/Dream-High/RMVPE)** - é«˜ç²¾åº¦çš„éŸ³é«˜æå–æŠ€æœ¯ã€‚

---

<div align="center">

**[GitHub ä»“åº“](https://github.com/lsg1103275794/DDSP-SVC-Enhanced-Public)** â€¢ **[é¡¹ç›®æ–‡æ¡£](docs/)** â€¢ **[æŠ¥å‘Šé—®é¢˜](https://github.com/lsg1103275794/DDSP-SVC-Enhanced-Public/issues)**

</div>

ä¸ºæ‚¨è€Œä½œ â¤ï¸ DDSP-SVC å¼€å‘è€…ç¤¾åŒº

</div>
